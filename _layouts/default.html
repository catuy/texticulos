<!doctype html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {%- seo -%}
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://tonejs.github.io/build/Tone.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'IBM Plex Sans', sans-serif;
        }
    </style>
    {%- feed_meta -%}
    {%- if jekyll.environment == 'production' and site.google_analytics -%}
      {%- include google-analytics.html -%}
    {%- endif -%}
  </head>
  <body class="bg-[#f8f9fe] min-h-screen w-full">
    {%- include header.html -%}
    <main class="px-0">
        {{ content }}
    </main>
    {%- include footer.html -%}
    <script>
      function adjustImageSize(img) {
        if (img.naturalHeight > img.naturalWidth) {
          img.classList.add('h-screen', 'w-auto');
          img.classList.remove('w-2/3', 'h-auto');
        } else {
          img.classList.add('w-2/3', 'h-auto');
          img.classList.remove('h-screen', 'w-auto');
        }
      }

      function filterCategory(cat) {
        const rows = document.querySelectorAll('[data-category]');
        rows.forEach(row => {
          if (cat === 'Todos' || row.dataset.category === cat) {
            row.style.display = 'block';
          } else {
            row.style.display = 'none';
          }
        });
        // Update active link
        document.querySelectorAll('.category-link').forEach(link => {
          link.classList.remove('line-through');
        });
        event.target.classList.add('line-through');
      }

      // PIANO SAMPLER
      const sampler = new Tone.Sampler({
        urls: {
          A0: "A0.mp3",
          C1: "C1.mp3",
          "D#1": "Ds1.mp3",
          "F#1": "Fs1.mp3",
          A1: "A1.mp3",
          C2: "C2.mp3",
          "D#2": "Ds2.mp3",
          "F#2": "Fs2.mp3",
          A2: "A2.mp3",
          C3: "C3.mp3",
          "D#3": "Ds3.mp3",
          "F#3": "Fs3.mp3",
          A3: "A3.mp3",
          C4: "C4.mp3",
          "D#4": "Ds4.mp3",
          "F#4": "Fs4.mp3",
          A4: "A4.mp3",
          C5: "C5.mp3",
          "D#5": "Ds5.mp3",
          "F#5": "Fs5.mp3",
          A5: "A5.mp3",
          C6: "C6.mp3",
          "D#6": "Ds6.mp3",
          "F#6": "Fs6.mp3",
          A6: "A6.mp3",
          C7: "C7.mp3",
          "D#7": "Ds7.mp3",
          "F#7": "Fs7.mp3",
          A7: "A7.mp3",
          C8: "C8.mp3"
        },
        baseUrl: "https://tonejs.github.io/audio/salamander/",
        onload: () => {
          console.log('Piano samples loaded');
        }
      }).toDestination();

      // Piano notes
      const pianoNotes = ['C3', 'D3', 'E3', 'F3', 'G3', 'A3', 'B3', 'C4', 'D4', 'E4', 'F4', 'G4', 'A4', 'B4', 'C5', 'D5', 'E5', 'F5', 'G5', 'A5'];

      function playRandomPianoNote() {
        try {
          // Start audio context if needed
          if (Tone.context.state !== 'running') {
            Tone.start();
          }

          const randomNote = pianoNotes[Math.floor(Math.random() * pianoNotes.length)];
          sampler.triggerAttackRelease(randomNote, '8n');
        } catch (e) {
          console.log('Tone.js not supported or error:', e);
        }
      }

      // Add hover sound to clickable projects
      document.addEventListener('DOMContentLoaded', function() {
        const projectLinks = document.querySelectorAll('a[data-category]');
        projectLinks.forEach(link => {
          link.addEventListener('mouseenter', playRandomPianoNote);
        });
      });
    </script>
  </body>
</html>
